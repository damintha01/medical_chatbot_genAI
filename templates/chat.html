<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediBot — AI Medical Assistant</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .chat-wrapper {
            width: 100%;
            max-width: 900px;
            height: 88vh;
            display: flex;
            flex-direction: column;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.4);
            background: #ffffff;
        }

        /* Header */
        .chat-header {
            background: linear-gradient(135deg, #0077b6 0%, #00b4d8 100%);
            padding: 18px 28px;
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .bot-avatar {
            width: 52px; height: 52px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            display: flex; align-items: center; justify-content: center;
            flex-shrink: 0;
            border: 2px solid rgba(255,255,255,0.4);
        }
        .bot-avatar i { font-size: 24px; color: #fff; }

        .header-info h1 { font-size: 18px; font-weight: 600; color: #fff; letter-spacing: .3px; }
        .header-info p {
            font-size: 12px; color: rgba(255,255,255,.8);
            margin-top: 2px; display: flex; align-items: center; gap: 5px;
        }
        .status-dot {
            width: 8px; height: 8px; background: #4ade80;
            border-radius: 50%; display: inline-block;
            animation: pulse 2s infinite;
        }
        @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:.5} }

        /* Messages */
        .chat-body {
            flex: 1; overflow-y: auto; padding: 24px;
            background: #f0f4f8;
            display: flex; flex-direction: column; gap: 16px;
        }
        .chat-body::-webkit-scrollbar { width: 6px; }
        .chat-body::-webkit-scrollbar-track { background: transparent; }
        .chat-body::-webkit-scrollbar-thumb { background: #c1c9d4; border-radius: 10px; }

        .welcome-message {
            text-align: center; padding: 30px 20px; color: #6b7b8d;
        }
        .welcome-message i { font-size: 40px; color: #0077b6; margin-bottom: 12px; display: block; }
        .welcome-message h2 { font-size: 18px; font-weight: 600; color: #334155; margin-bottom: 6px; }
        .welcome-message p { font-size: 13px; line-height: 1.5; }

        /* Bubbles */
        .message {
            display: flex; align-items: flex-end; gap: 10px;
            max-width: 78%; animation: fadeIn .3s ease;
        }
        @keyframes fadeIn { from{opacity:0;transform:translateY(8px)} to{opacity:1;transform:translateY(0)} }

        .message.user  { align-self: flex-end; flex-direction: row-reverse; }
        .message.bot   { align-self: flex-start; }

        .msg-avatar {
            width: 34px; height: 34px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            flex-shrink: 0; font-size: 14px;
        }
        .message.bot  .msg-avatar { background: linear-gradient(135deg,#0077b6,#00b4d8); color:#fff; }
        .message.user .msg-avatar { background: linear-gradient(135deg,#6366f1,#8b5cf6); color:#fff; }

        .msg-bubble {
            padding: 12px 18px; font-size: 14px; line-height: 1.6;
            border-radius: 18px; position: relative; word-wrap: break-word;
        }
        .message.bot  .msg-bubble { background:#fff; color:#1e293b; border-bottom-left-radius:4px; box-shadow:0 1px 4px rgba(0,0,0,.06); }
        .message.user .msg-bubble { background:linear-gradient(135deg,#6366f1,#8b5cf6); color:#fff; border-bottom-right-radius:4px; }

        .msg-time { font-size: 10px; margin-top: 4px; display: block; }
        .message.bot  .msg-time { color: #94a3b8; }
        .message.user .msg-time { color: rgba(255,255,255,.7); text-align: right; }

        /* Typing */
        .typing-indicator { display:flex; align-items:flex-end; gap:10px; max-width:78%; align-self:flex-start; animation:fadeIn .3s ease; }
        .typing-dots {
            background:#fff; border-radius:18px; border-bottom-left-radius:4px;
            padding:14px 20px; display:flex; gap:5px; box-shadow:0 1px 4px rgba(0,0,0,.06);
        }
        .typing-dots span { width:8px; height:8px; background:#94a3b8; border-radius:50%; animation:bounce 1.4s infinite; }
        .typing-dots span:nth-child(2){animation-delay:.2s}
        .typing-dots span:nth-child(3){animation-delay:.4s}
        @keyframes bounce { 0%,60%,100%{transform:translateY(0)} 30%{transform:translateY(-8px)} }

        /* Footer */
        .chat-footer { padding: 16px 24px; background: #fff; border-top: 1px solid #e8edf2; }
        .chat-footer form {
            display: flex; align-items: center; gap: 12px;
            background: #f0f4f8; border-radius: 16px;
            padding: 6px 6px 6px 20px; transition: box-shadow .2s;
        }
        .chat-footer form:focus-within { box-shadow: 0 0 0 2px #0077b6; background: #fff; }
        .chat-footer input {
            flex: 1; border: none; background: transparent; outline: none;
            font-size: 14px; font-family: 'Inter',sans-serif; color: #1e293b; padding: 10px 0;
        }
        .chat-footer input::placeholder { color: #94a3b8; }
        .send-btn {
            width: 44px; height: 44px; border-radius: 12px; border: none;
            background: linear-gradient(135deg,#0077b6,#00b4d8); color: #fff;
            font-size: 16px; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            transition: transform .15s, opacity .15s; flex-shrink: 0;
        }
        .send-btn:hover { transform: scale(1.05); opacity: .9; }
        .send-btn:active { transform: scale(.95); }
        .disclaimer { text-align: center; font-size: 11px; color: #94a3b8; margin-top: 8px; }

        @media(max-width:600px){
            body{padding:0}
            .chat-wrapper{height:100vh;border-radius:0}
            .message{max-width:88%}
        }
    </style>
</head>
<body>
    <div class="chat-wrapper">
        <div class="chat-header">
            <div class="bot-avatar"><i class="fas fa-heartbeat"></i></div>
            <div class="header-info">
                <h1>MediBot</h1>
                <p><span class="status-dot"></span> Online — AI Medical Assistant</p>
            </div>
        </div>

        <div class="chat-body" id="chatBody">
            <div class="welcome-message">
                <i class="fas fa-stethoscope"></i>
                <h2>Welcome to MediBot</h2>
                <p>I'm your AI-powered medical assistant. Ask me anything about health, symptoms, or medical conditions.</p>
            </div>
        </div>

        <div class="chat-footer">
            <form id="messageArea" autocomplete="off">
                <input type="text" id="text" name="msg" placeholder="Ask a medical question..." required />
                <button type="submit" class="send-btn" id="send"><i class="fas fa-paper-plane"></i></button>
            </form>
            <p class="disclaimer">⚠ MediBot provides informational responses only — not medical advice.</p>
        </div>
    </div>

    <script>
        $(document).ready(function () {
            const chatBody = $("#chatBody");

            function getTime() {
                const d = new Date();
                return d.getHours().toString().padStart(2,'0') + ":" + d.getMinutes().toString().padStart(2,'0');
            }
            function scrollToBottom() {
                chatBody.stop().animate({ scrollTop: chatBody[0].scrollHeight }, 300);
            }
            function addUserMessage(text) {
                const time = getTime();
                chatBody.append(`
                    <div class="message user">
                        <div class="msg-avatar"><i class="fas fa-user"></i></div>
                        <div class="msg-bubble">${text}<span class="msg-time">${time}</span></div>
                    </div>`);
                $(".welcome-message").fadeOut(200, function(){ $(this).remove(); });
                scrollToBottom();
            }
            function addBotMessage(text) {
                const time = getTime();
                chatBody.append(`
                    <div class="message bot">
                        <div class="msg-avatar"><i class="fas fa-heartbeat"></i></div>
                        <div class="msg-bubble">${text}<span class="msg-time">${time}</span></div>
                    </div>`);
                scrollToBottom();
            }
            function showTyping() {
                chatBody.append(`
                    <div class="typing-indicator" id="typingIndicator">
                        <div class="msg-avatar" style="background:linear-gradient(135deg,#0077b6,#00b4d8);color:#fff;width:34px;height:34px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:14px;flex-shrink:0;">
                            <i class="fas fa-heartbeat"></i>
                        </div>
                        <div class="typing-dots"><span></span><span></span><span></span></div>
                    </div>`);
                scrollToBottom();
            }
            function hideTyping() { $("#typingIndicator").remove(); }

            $("#messageArea").on("submit", function (event) {
                event.preventDefault();
                const rawText = $("#text").val().trim();
                if (!rawText) return;

                addUserMessage(rawText);
                $("#text").val("");
                showTyping();

                $.ajax({
                    data: { msg: rawText },
                    type: "POST",
                    url: "/get",
                }).done(function (data) {
                    hideTyping();
                    addBotMessage(data);
                }).fail(function () {
                    hideTyping();
                    addBotMessage("Sorry, something went wrong. Please try again.");
                });
            });
        });
    </script>
</body>
</html>